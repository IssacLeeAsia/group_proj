---
title: "Group Project 1 Report"
author: 
- "Martin Chen (bc3517)" 
- "Yuan Huang (yh2741)"
- 'Jingdan Zou (jz5898)' 
- "Sitong Zou (sz4548)"
format: 
  pdf:
    fig-pos: 'H'
execute:
  echo: false
---

```{r}
#| message: false
#| echo: false
library(tidyverse)
library(psych)
library(kableExtra)
dat <- read.csv("data/exp_data.csv") |> mutate(wing_length = as.factor(wing_length))
theme_set(theme_classic())
```

## 1) Describe how your group conducted the experiment in detail 

- a) How are the paper helicopters made (choice of paper, who made the helicopters, and in what steps) 

  - We chose the standard printer paper to make the helicopters. All the helicopters were drawn by Sitong and folded by Jingdan.

- b) How are the paper helicopters tossed (who performed the experiment, in what sequence, who recorded the data) 

  - Yuan tossed the paper helicopters while Jingdan, Martin, and Sitong were in charge of videotaping and timing. Then Martin and Yuan recorded the data through the video. The whole experiment was performed following the randomized list.

- c) Create a randomized list of experiments for examining four wing lengths of (3”, 2.5”,2”,1.5”) with eight replicate experiments in each level. 

  - Our randomized list is generated by R using ‘sample()’ command without replacement. 

    - 1 2 4 1 4 1 3 3 2 2 4 3 2 2 4 1 3 1 1 1 4 4 3 1 4 3 2 3 2 4 2 3 [^1]

[^1]: 1, 2, 3, and 4 denote helicopters with wing lengths of 1.5'', 2", 2.5", and 3" respectively.

- d) Explain how randomization is done and at what step (your choice of step a) or step b), or both) 

  - The randomization is done at step b, with assigning each drop a random number of 1 to 4 representing the helicopter. This randomization reduces the effects on helicopter performance due to time and order. 

- e) Attach pictures of your experiment setting: including a picture of the helicopters, timing method(s) and the room setting. 

![](fig/workflow.png)

## 2) Describe the experimental unit. (Is it the helicopter? Or is it a throw?) 

- The experimental unit is the helicopter.

## 3) Explain the difference in replicates and duplicates in the context of the helicopter experiment, and given the experimental unit of your choice (replicates: replications of the experimental unit; duplicates: multiple measurements of the same experimental unit) 

- In our context, replication is implemented by making eight helicopter drops for each wing length. Duplication means we repeat the experiment and measure eight times with the same helicopter.

## 4) Describe the treatment factor. Why do you anticipate varying the treatment factor will lead to differential results (flying time)? What’s the “theory”? 

- The treatment factor is the wing length. According to the theory, the paper helicopter that has shorter blades should fall faster because the shorter blades do not generate as much lift. And the longer wing length of a paper helicopter would provide the most flight time due to the increased surface area of the wing. According to the theory, our hypothesis is that the flying time is longer when we have longer wing length.

## 5) Describe any (lurking) variables that might affect the results of experiments. (think carefully and list as many as factors that you can think of. You can make a list of variables during the planning stage, and revise this list after you complete the experiment.) 

1.	Before the experiment

-	Airflow
-	Material of the helicopter(This concern is solved by design where we choose the same paper for all the helicopters)
-	Changes in the shape of the helicopter after each trial
-	Method to measure the time difference
-	Height of dropping the helicopter
-	Weight of the helicopter
-	Temperature 

2.	After the experiment

-	Contact with hands while dropping the helicopter
-	People passing by when we conducting the experiment

## 6) Explain how randomization would be important to control confounding and explain how replications could help reduce the impact of other variables on the findings. 

- By randomizing the replication list, we are able to exclude the impact of confounding and other variables. Without randomizing the list, we would do the experiment by first dropping the first helicopter eight times and doing the rest accordingly. The benefit of randomizing the list will balance out the effects like airflow, temperature, the situation of the lack of focus when flying the helicopter in the last several trials and etc. By doing the replication multiple times, we could average out any random variability or noise, leading to more reliable results, for instance, average out the measurement error in measuring the flying time, and balance out the impact of contact with hands while dropping the helicopter.

  -	Randomization helps control for potential confounding variables by ensuring that any systematic biases are evenly distributed across all treatments. In our case, the randomization ensure we to balance out the effect of confounding variables like airflow,

  -	Replicating the experiments multiple times for each combination of wing length helps reduce the impact of other variables on the findings. By conducting multiple replicates, any random variability or noise in the data can be averaged out, leading to more reliable results. Additionally, replicates allow for the assessment of consistency and reproducibility of the experimental outcomes.


## 7) Carry out the experiments and collect the data. (You may want to practice a few times to practice your helicopter flying skills. My daughter told me adding some weight (like a paper clip) to bottom of the helicopter really helps. ) 

[Experiment data](https://docs.google.com/spreadsheets/d/1ivOea_bKHQtOFSQe1ySU_bEDceatedkRziCkjx-VYC8/edit?usp=sharing)

## 8) Perform an analysis of variance with your data.

-  a)  Plot the data using scatter plot, Y axis-flying time, X axis-wing length, and indicate the overall mean and the group means. 3'' (2½", 2", 1½") ¼'' \~2½ "

The group means and overall mean are in the following table.

```{r}
plot_1_dat <- dat |>  group_by(wing_length)|> 
  summarise(`group mean` = mean(time_diff.sec.)) |> 
  add_column(`overall mean` = c(mean(dat$time_diff.sec), rep(NA,3)))
kable(plot_1_dat, digits = 3)
```


The dashed lines stands for the overall mean. The colored dots indicate the the mean flying time (y) for each wing length (x).

```{r}
#| fig.pos: "H"

plot_1 <- plot_1_dat |> ggplot(aes(x = wing_length, 
                                  y = `group mean`)) +
  geom_point(aes(color = as.factor(wing_length)), size = 5) +
    geom_hline(yintercept = mean(dat$time_diff.sec.), lty = "dashed") +
    theme(legend.position = "none")
plot_1
```

- b)  Report the F test results. What percent of the variance is explained by wing length variation? Does the wing length make a difference in the flying time of a paper helicopter?

    -   The percent of the variance explained by wing length variation is **75.73**.
    -   If we set the significance level at .05, we can believe that wing length made a difference since the p-value of F Test is **9.351e-09**.

```{r}
fit1 <- lm(data = dat, formula = time_diff.sec. ~ wing_length)
aov_rslt_1 <- anova(fit1)
kable(aov_rslt_1)
```

-  c)  Check the equal variance and normality assumptions with residual plots.

    -   The equal variance and normality assumption was not violated in this model.

```{r}
plot(fit1, 1)
```

```{r}
plot(fit1, 2)
```

-  d)  Test whether there is a significant linear or quadratic trend in flight times as the wing length increases using a polynomial contrast.

    - It seems there is an quadratic trend in flight times as the wing length increases. The p-value of quadratic trend is smaller than 0.05 (1.11e-08) while the p-value of linear trend is larger than 0.05 (0.0825).

```{r}
model <- aov(data = dat, time_diff.sec. ~ wing_length, 
             contrasts = list(wing_length = contr.poly(4)))
summary_d <- summary.aov(model, 
            split = list(wing_length = list("Linear"=1, 
                                      "Quadratic" = 2)))

 summary_d

```

## 9) What did you learn from this experiment? How would you recommend to improve this experiment if we are interested in understanding the effect of wing length on flying time?

We learned that once the experiment started, there could be variables that we didn't anticipate before conducting experiments. Using cardstock paper with a hard texture will make the helicopter's wings maintain a 90 degree angle to its body more easily.


